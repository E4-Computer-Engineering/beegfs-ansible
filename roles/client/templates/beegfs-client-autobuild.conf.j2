### {{ ansible_managed }} ###
{% if client_rdma_enabled %}
{% if client_ofed_libs_path | length > 0 %}{# Custom OFED path provided #}
{% if client_gpu_direct and client_nvfs_libs_path | length > 0 and client_nvidia_libs_path | length > 0 %}{# GPUDirect #}
buildArgs=-j8 OFED_INCLUDE_PATH={{ client_ofed_libs_path }} \
NVFS_INCLUDE_PATH={{ client_nvfs_libs_path }} \
NVIDIA_INCLUDE_PATH={{ client_nvidia_libs_path }}
{% else %}{# No GPUDirect and Custom OFED path provided #}
buildArgs=-j8 OFED_INCLUDE_PATH={{ client_ofed_libs_path }}
{% endif %}
{% else %}{# No OFED path provided (Inbox drivers) #}
buildArgs=-j8
{% endif %}
{% else %}{# RDMA not enabled #}
buildArgs=-j8 BEEGFS_NO_RDMA=1
{% endif %}
{% if client_build_kernel_modules %}
buildEnabled=true
{% else %}
buildEnabled=false
{% endif %}
